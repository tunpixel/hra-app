{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app/modules/users/scripts/users.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"users.bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nmodule.exports = function (ngApp) {\n\n\n  ngApp.controller('UsersController', UsersController);\n\n  function UsersController($http) {\n\n    this.userView = 'modules/users/views/user-view.html';\n\n    // list of users\n    this.users = null;\n\n    // selected user\n    this.user = null;\n\n    // server-side page size\n    this.pageSize = 100;\n\n    // loading indicator\n    this.loading = false;\n\n    var that = this;\n\n    this.load = function () {\n      if (!that.loading) {\n        that.loading = true;\n\n        if (!that.users) {\n          that.page = 0;\n        }\n\n        var params = {\n          page: that.page,\n          count: that.pageSize\n        };\n\n        $http.get('/api/data.json', {\n          params: params\n        }).success(function (data) {\n\n          if (!that.users) {\n            that.users = [];\n          }\n\n          if (data.users && data.users.length) {\n            Array.prototype.push.apply(that.users, data.users);\n            that.page++;\n          }\n\n          if (data.users.length < that.pageSize) {\n            that.completed = true;\n          }\n\n        }).error(function (err) {\n          console.error(err);\n        }).finally(function () {\n          // $timeout(function () {\n          that.loading = false;\n          // }, 500);\n        });\n\n      }\n    };\n\n    this.load();\n\n  }\n\n  UsersController.prototype.reset = function () {\n    this.users.length = 0;\n    this.user = null;\n    this.page = 0;\n    this.loading = false;\n    this.completed = false;\n  };\n\n  UsersController.prototype.select = function (user) {\n    this.user = user;\n  };\n\n\n  UsersController.prototype.goAdd = function () {\n    this.user = this.tempAddUser = {};\n    this.userView = 'modules/users/views/user-add.html';\n  };\n\n  UsersController.prototype.saveAdd = function () {\n    this.tempAddUser.id = Date.now() + '.' + Math.random();\n    // this.user = angular.copy(this.tempAddUser);\n    this.user = this.tempAddUser;\n    this.users.push(this.user);\n    this.userView = 'modules/users/views/user-view.html';\n  };\n\n\n  UsersController.prototype.goEdit = function (user) {\n    this.editUser = user;\n    this.tempEditUser = angular.copy(user);\n    this.userView = 'modules/users/views/user-edit.html';\n  };\n\n  UsersController.prototype.saveEdit = function () {\n    delete this.tempEditUser.id;\n    angular.extend(this.editUser, this.tempEditUser);\n    this.user = this.editUser;\n    this.userView = 'modules/users/views/user-view.html';\n  };\n\n  UsersController.prototype.cancelEdit = function () {\n    this.user = this.editUser;\n    this.userView = 'modules/users/views/user-view.html';\n  };\n\n};\n"]}